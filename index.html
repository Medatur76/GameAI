<!DOCTYPE html>
<html>
    <head>
        <title>Trackmania 2020 AI</title>
    </head>
    <body>
        <script>
            text = document.body.appendChild(document.createElement("h2"))
            canvas = document.body.appendChild(document.createElement("canvas"))
            setInterval(function() {
                // Call `fetch()`, passing in the URL.
                fetch("127.0.0.1:5000/data")
                // fetch() returns a promise. When we have received a response from the server,
                // the promise's `then()` handler is called with the response.
                .then((response) => {
                    // Our handler throws an error if the request did not succeed.
                    if (!response.ok) {
                        throw new Error(`HTTP error: ${response.status}`);
                    }
                    // Otherwise (if the response succeeded), our handler fetches the response
                    // as text by calling response.text(), and immediately returns the promise
                    // returned by `response.text()`.
                    return response.text();
                })
                // When response.text() has succeeded, the `then()` handler is called with
                // the text, and we copy it into the `poemDisplay` box.
                .then((text2) => {
                    text.textContent = text2;
                })
                // Catch any errors that might happen, and display a message
                // in the `poemDisplay` box.
                .catch((error) => {
                    text.textContent = `Could not fetch data: ${error}`;
                });
            }, 75)
        </script>
    </body>
</html>